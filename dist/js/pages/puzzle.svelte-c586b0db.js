import{S as k,i as w,s as y,e as g,j as x,c as d,a as p,l as q,d as h,b as $,f as _,E as B,p as f,v,w as b,x as C,F as E,n as m,A as M,m as D,o as F,M as V}from"../chunks/vendor-75223a1c.js";import{M as j,a as S,b as R,c as T,f as N}from"../chunks/MultisetPuzzleView.svelte_svelte_type_style_lang-65f85338.js";import"../chunks/Content.svelte_svelte_type_style_lang-e3804d70.js";const O={equals:(a,e)=>a.length===e.length&&a.every((r,t)=>a[t]===e[t])},U={create:a=>{const e=S.generate(a),r=Math.ceil(a.tableCards/2);let t=e.splice(0,r),i=0;for(;t.length<a.tableCards;){const n=t.sampleFew(a.cards-1),c=j.getMatch(a,n);if(t.some(o=>O.equals(o,c))){if(i+=1,i>e.length)break;continue}t.push(c)}if(console.log("TABLE FILLED",t.length),t.length<a.tableCards){const c=e.filter(o=>!t.includes(o)).sampleFew(a.tableCards-t.length);t=t.concat(c)}return{flavor:a,table:t,count:j.getMatchCount(a,t)}}};function I(a,e,r){const t=a.slice();return t[3]=e[r],t}function L(a,e,r){const t=a.slice();return t[6]=e[r],t}function P(a){let e,r,t;return r=new T({props:{flavor:a[0].flavor,card:a[0].table[a[6]]}}),{c(){e=g("div"),v(r.$$.fragment),this.h()},l(i){e=d(i,"DIV",{class:!0});var n=p(e);b(r.$$.fragment,n),n.forEach(h),this.h()},h(){$(e,"class","card svelte-1xqrcl5")},m(i,n){_(i,e,n),C(r,e,null),t=!0},p:E,i(i){t||(f(r.$$.fragment,i),t=!0)},o(i){m(r.$$.fragment,i),t=!1},d(i){i&&h(e),M(r)}}}function A(a){let e,r,t,i=a[3],n=[];for(let o=0;o<i.length;o+=1)n[o]=P(L(a,i,o));const c=o=>m(n[o],1,1,()=>{n[o]=null});return{c(){e=g("div");for(let o=0;o<n.length;o+=1)n[o].c();r=x(),this.h()},l(o){e=d(o,"DIV",{class:!0});var l=p(e);for(let s=0;s<n.length;s+=1)n[s].l(l);r=q(l),l.forEach(h),this.h()},h(){$(e,"class","row svelte-1xqrcl5")},m(o,l){_(o,e,l);for(let s=0;s<n.length;s+=1)n[s].m(e,null);B(e,r),t=!0},p(o,l){if(l&3){i=o[3];let s;for(s=0;s<i.length;s+=1){const u=L(o,i,s);n[s]?(n[s].p(u,l),f(n[s],1)):(n[s]=P(u),n[s].c(),f(n[s],1),n[s].m(e,r))}for(D(),s=i.length;s<n.length;s+=1)c(s);F()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)f(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)m(n[l]);t=!1},d(o){o&&h(e),V(n,o)}}}function G(a){let e,r,t,i,n=a[1],c=[];for(let l=0;l<n.length;l+=1)c[l]=A(I(a,n,l));const o=l=>m(c[l],1,1,()=>{c[l]=null});return t=new R({}),{c(){e=g("div");for(let l=0;l<c.length;l+=1)c[l].c();r=x(),v(t.$$.fragment),this.h()},l(l){e=d(l,"DIV",{class:!0});var s=p(e);for(let u=0;u<c.length;u+=1)c[u].l(s);s.forEach(h),r=q(l),b(t.$$.fragment,l),this.h()},h(){$(e,"class","table svelte-1xqrcl5")},m(l,s){_(l,e,s);for(let u=0;u<c.length;u+=1)c[u].m(e,null);_(l,r,s),C(t,l,s),i=!0},p(l,[s]){if(s&3){n=l[1];let u;for(u=0;u<n.length;u+=1){const z=I(l,n,u);c[u]?(c[u].p(z,s),f(c[u],1)):(c[u]=A(z),c[u].c(),f(c[u],1),c[u].m(e,null))}for(D(),u=n.length;u<c.length;u+=1)o(u);F()}},i(l){if(!i){for(let s=0;s<n.length;s+=1)f(c[s]);f(t.$$.fragment,l),i=!0}},o(l){c=c.filter(Boolean);for(let s=0;s<c.length;s+=1)m(c[s]);m(t.$$.fragment,l),i=!1},d(l){l&&h(e),V(c,l),l&&h(r),M(t,l)}}}function H(a){let e=N.mini,r=U.create(e),t=Array.rectRange(3,e.tableCards/3);return console.log("COUNT:",r.count),[r,t]}class J extends k{constructor(e){super();w(this,e,H,G,y,{})}}function K(a){let e,r;return e=new J({}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,i){C(e,t,i),r=!0},p:E,i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}class Y extends k{constructor(e){super();w(this,e,null,K,y,{})}}export{Y as default};
